function SliSpark(H,E){var w=undefined,A=H,C=E,o=w,c=w,F=w,q=w,t=w,a=w,k=w,g=w,x=[],n="https:",B=w,z=w,j=w,i=1,I=0,G="",P=new Date().getTime(),D=w,l=0,r=w,f=[],M=w,O=false,y=[],h=false,u=0,e=0,v="b.sli-spark.com/",m="b.png?";function d(Q){return encodeURIComponent(Q)}var L=function J(V,T,S,Q,R){this.transactionId=V;this.systemUserId=T;this.orderTotal=S;this.shippingTotal=Q;this.taxTotal=R;this.items=[];var U=function(Y,X,W){this.sku=Y;this.qty=X;this.total=W;this.toString=function(){return"("+d(this.sku)+"|"+d(this.qty)+"|"+d(this.total)+")"}};this.addItem=function(Z,Y,X){var W=new U(Z,Y,X);this.items.push(W)}};function K(){try{B=top.document.referrer}catch(Q){try{B=document.referrer}catch(R){B=w}}}this.addTransaction=function(U,T,S,Q,R){z=new L(U,T,S,Q,R)};this.addItem=function(S,R,Q){if(z!==w){z.addItem(S,R,Q)}};this.addSearch=function(T,S,Q,U,R){if(!h){K()}else{i+=1}M=1;F=T;a=S;t=Q;k=U;if(R){g=R}};this.setPageType=function(Q){q=Q};this.setLocation=function(Q){o=Q};this.addPageSku=function(Q){x.push(d(Q))};this.setSystemUserId=function(Q){c=Q};this.addCustomField=function(R,Q){var S=[R,Q];if(e){f=[];e=0}f.push(S)};this.writeTrackCode=function(){N("pageview")};this.writeEventCode=function(){N("event")};function N(T){if(!h){K()}I+=1;var R=v+d(A)+"/"+d(C)+"/"+m,W,U;W="logtype="+d(T);W+="&custCode="+d(A);W+="&siteId="+d(C);W+="&time="+d(new Date().getTime());W+="&eventCount="+d(I);if(o){W+="&location="+d(o)}if(c){W+="&systemUserId="+d(c)}if(M){W+="&search=1"}if(F){W+="&searchTerm="+d(F)}if(q){W+="&pageType="+d(q)}if(t){W+="&searchPageNumber="+d(t)}if(a){W+="&numberSearchResults="+d(a)}if(k){W+="&searchRefinements="+d(k)}if(g){W+="&sort="+d(g)}if(B){W+="&referrer="+d(B)}if(l){W+="&bcf="+d(l)}if(x.length){W+="&sku="+d(x.join(";"));x=[]}p();if(f.length){var V="";for(U=0;U<f.length;U++){var Q="("+d(f[U][0])+":"+d(f[U][1])+")";V+=(U>0)?";"+Q:Q}W+="&customFields=u"+d(V);e=1}var S=n+"//"+R+W;s(S)}this.writeTransactionCode=function(){if(!h){K()}I+=1;var R=v+d(A)+"/"+d(C)+"/"+m,V="logtype=transaction";V+="&custCode="+d(A);V+="&siteId="+d(C);V+="&eventCount="+d(I);V+="&transactionId="+d(z.transactionId);V+="&systemUserId="+d(z.systemUserId);V+="&orderTotal="+d(z.orderTotal);V+="&shippingTotal="+d(z.shippingTotal);V+="&taxTotal="+d(z.taxTotal);V+="&time="+d(new Date().getTime());if(l){V+="&bcf="+d(l)}if(z.items.length){var W="";for(var T=0;T<z.items.length;T++){W+=(T>0)?";"+z.items[T].toString():z.items[T].toString()}V+="&items=u"+d(W)}if(f.length){var U="";for(T=0;T<f.length;T++){var Q="("+d(f[T][0])+":"+d(f[T][1])+")";U+=(T>0)?";"+Q:Q}V+="&customFields=u"+d(U);e=1}var S=n+"//"+R+V;s(S)};function s(Q){if(O===false){O=true;var R=new Image(1,1);O=true;R.src=Q;R.onload=b}else{y.push(Q)}}function b(){if(y.length){var Q=y.pop();var R=new Image(1,1);O=true;R.src=Q;R.onload=b}else{O=false}}function p(){var R=0,Q=0;if(typeof(window.innerWidth)=="number"){Q=window.innerHeight;R=window.innerWidth}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){Q=document.documentElement.clientHeight;R=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){Q=document.body.clientHeight;R=document.body.clientWidth}}}f.push(["_win",R+"x"+Q]);if(window.screen){f.push(["_res",screen.width+"x"+screen.height])}}};